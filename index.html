<!doctype html>
<html>

<head>

<meta charset="utf-8">

<link href="animate.min.css" rel="stylesheet" type="text/css">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <script src="jquery.min.js"></script>
    <script src="cordova.js"></script>
    <script src="preventreload.js"></script>
    <script src="http://250taxi.com/appcontent/welcome.js"></script>

    <script type="text/javascript">
        document.addEventListener("deviceready", onDeviceReady, false);

        function onDeviceReady() {
            // Now safe to use device APIs
            // set to either landscape
            screen.lockOrientation('portrait');
            dogpscheck();
            dodevicenamecheck();
        }

        function showindicator() {
            document.getElementById("loadingindicator").className = "animated fadeIn";
            document.getElementById("loadingindicator").style.display = "block";
        }

        function letsgo() {
            showindicator();
            setTimeout(function() {
                document.location.href = 'locate.html';
            }, 3000);
        }
        
        document.addEventListener('deviceready', function () {    
    
  // Enable to debug issues.
  // window.plugins.OneSignal.setLogLevel({logLevel: 4, visualLevel: 4});
  
  var notificationOpenedCallback = function(jsonData) {
    console.log('didReceiveRemoteNotificationCallBack: ' + JSON.stringify(jsonData));
  };

  window.plugins.OneSignal.init("03b0ecf1-200e-470c-8c27-9010306734a3",
                                 {googleProjectNumber: "1006498509511"},
                                 notificationOpenedCallback);
  
  // Show an alert box if a notification comes in when the user is in your app.
  window.plugins.OneSignal.enableInAppAlertNotification(true);
}, false);

        $(document).ready(function() {
			
$( "#welcome_notice" ).load( "http://250taxi.com/appcontent/welcome.php", function() {

});

            $.get("http://250taxi.com/db/partner/check_app_update.php?check=client", function(data) {
                var currentversion = "6";
                var serverversion = data;
                if (currentversion < serverversion) {
                    alert("Your app is outdated. Please install the update to ensure smooth operation.");
                }
            });


            var rememberuser = localStorage.getItem('rememberuser');

            // alert(rememberuser);

            if (rememberuser == 'Yes') {
                document.location.href = 'gotostart.html';
            } else {
                //    alert('Please log in');
            }

            var currentTime = new Date().getHours();
            if (0 <= currentTime && currentTime < 5) {
                setnight();
            }
            if (5 <= currentTime && currentTime < 11) {

            }
            if (11 <= currentTime && currentTime < 16) {

            }
            if (16 <= currentTime && currentTime < 22) {

            }
            if (22 <= currentTime && currentTime <= 24) {
                setnight();
            }

        });

        function setnight() {
            // document.getElementById('splashimg').src = 'splash_night.jpg';
            // document.getElementById('splashpage').style.backgroundColor = '#130F20';
            // document.getElementById('claim').style.color = '#73CEE9';
        }

function dogpscheck() {
            CheckGPS.check(function win() {

                },
                function fail() {
                    opensettings();
                });
        }
        function opensettings() {
                alert("Your GPS is not enabled. Please turn it on in your device settings. 250 Taxi needs GPS to find your pickup location.")
}
function dodevicenamecheck() {
    var device_model = device.model;
    var device_platform = device.platform;
    var device_version = device.version;
    var device_uuid = device.uuid;
    // alert(device_model + device_platform + device_version + device_uuid);
    localStorage.setItem("device_model",device_model);
    localStorage.setItem("device_platform",device_platform);
    localStorage.setItem("device_version",device_version);
    localStorage.setItem("device_uuid",device_uuid);
}
        
    </script>

    <style>
        ::-webkit-scrollbar { 
        display: none; 
        }
		body {
            font-family: Roboto, sans-serif;
            font-size: 18px;
            color: #000;
            text-align: center;
            margin: 0px;
            padding: 0px;
			height: 100%;
		}
        
        #loginregister {
			margin-top: 100px;
            width: 80%;
            margin-left: 10%;
        }
        
        #loginregister img {
            width: 48%;
        }
        
        #claim {
            font-size: 25px;
            font-style: italic;
            font-weight: 700;
            position: absolute;
            text-align: center;
            z-index: 100;
            width: 100%;
			height: 100%;
			color:#FFFFFF;
        }
        
        #copyright {
            color: #FFFFFF;
            font-size: 16px;
            position: absolute;
            text-align: center;
            z-index: 100;
            width: 100%;
            bottom: 5%;
            text-transform: uppercase;
            text-shadow: 0 0 5px #000000;
        }
	#loadingindicator {
    filter: invert(100%);
    -webkit-filter: invert(100%);
    background-color: #E2E2E2;
    position: absolute;
    z-index: 10000000000000000;
    height: 100%;
    width: 100%;
    left: 0px;
    top: 0px;
    text-align: center;
    display: none;
	}
	#loadingindicator img {
    margin-top: 100px;
    width: 160px;
	}
		
		
	video { 
    position: fixed;
    top: 50%;
    left: 50%;
    min-width: 100%;
    min-height: 100%;
    width: auto;
    height: auto;
    z-index: -100;
    transform: translateX(-50%) translateY(-50%);
	}
	</style>

</head>

<body>
	
<video autoplay id="bgvid" loop>
<source src="kigali.mp4" type="video/mp4">
</video>
    
<div id="loadingindicator" style="display:none">
    <img src="282.gif" width="120">
</div>

    <div id="claim" class="animated fadeIn" style="-webkit-animation-delay: 2s;">
		
		<br>
		
		<img style="width: 70%; max-width: 400px;" src="splash_logo.png"><br>
		
		<div>We take you there</div>
		
		<div id="welcome_notice"></div>
		
		<div id="loginregister">
        	<img class="animated zoomIn" style="-webkit-animation-delay: 1.5s;" onclick="showindicator();document.location.href = 'reg/login.html'" src="reg/login.png">
        	<img class="animated zoomIn" style="-webkit-animation-delay: 1.7s;" onclick="showindicator();document.location.href = 'reg/mainmenu.html'" src="reg/register.png">
    	</div>
		
	</div>

    

    <div id="copyright" class="animated fadeIn" style="-webkit-animation-delay: 2s; display:none;">
        <img style="width: 50%;" src="tigo.png">
    </div>



</body>

</html>
