<!DOCTYPE html>
<html>
<head>
<title>250 taxi</title>

<meta charset="utf-8"> 
    
<script src="logupdate.js"></script>
      
<link href="animate.min.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="pushmenu/jPushMenu.css"> 
<link rel="stylesheet" type="text/css" href="waves.css">
<link rel="stylesheet" type="text/css" href="on_off_switch.css">
<link rel="stylesheet" type="text/css" href="journey.css">
<link rel="stylesheet" type="text/css" href="animate.min.css">
<link rel="stylesheet" type="text/css" href="google_spinner.css">
<link rel="stylesheet" type="text/css" href="searchdrivers.css">
    
<link href='https://fonts.googleapis.com/css?family=Orbitron:500' rel='stylesheet' type='text/css'>
      
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
 
<script src="cordova.js"></script>

<script>
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
    dogpscheck();
    screen.lockOrientation('portrait');
    document.addEventListener("backbutton", function (e) {
        e.preventDefault();
    }, false );
}
function dogpscheck() {
            CheckGPS.check(function win() {

                },
                function fail() {
                    opensettings();
                });
        }
        function opensettings() {
                alert("Your GPS is not enabled. Please turn it on in your device settings. 250 Taxi needs GPS to find your pickup location.")
}
</script>
  

    
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDb1A29Jk9FtTZSiHDlfUPM9mHM42cAiRo&libraries=places"></script>
      
<script src="jquery.min.js"></script>
<script src="jquery.validate.min.js"></script>
    
<script src="ls_reset.js"></script>
<script src="mli.js"></script>
    
<script src="responsivevoice.js"></script>
<script src="materialize.js"></script>
<script src="pushmenu/jPushMenu.js"></script>
<script src="pushmenu/mainmenu.js"></script>
      
<script src="preventreload.js"></script>
    
<script src="searchdrivers.js"></script>
<script src="journey.js"></script>

<script src="toast.js"></script>
<link rel="stylesheet" type="text/css" href="toast.css">
    
<script>
    
$(document).ready(function() {
    
// var map;

// map = new google.maps.Map(document.getElementById('map'), {
//     center: {lat: -1.957236, lng: 30.100284},
//     zoom: 10,
//     disableDefaultUI: true,
//     streetViewControl: false
// });
    
document.getElementById("locationfieldholder").style.display = "none";
document.getElementById("locationfield").style.display = "none";
document.getElementById("inlocationfield").style.display = "none";
document.getElementById("loading_map_indicator").style.display = "block";

var voice_enabled = localStorage.getItem("voice_enabled");
if (voice_enabled == "On") {responsiveVoice.speak("Loading map");}

var input = document.getElementById('taxirequest_destination');
var options = {
  componentRestrictions: {country: 'rw'}
};

autocomplete = new google.maps.places.Autocomplete(input, options);    

});
</script>
      
<style>
html, body {
	-webkit-tap-highlight-color: rgba(0,0,0,0);
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
html, body, #map {
    margin: 0;
    padding: 0;
    height: 100%;
}
#locationfieldholder {
        position: absolute;
        background-color: rgba(255,255,255,0.9);
        width: 84%;
        left: 14%;
        height: 15%;
        z-index: 100;
        top: 8px;
        border-left: 1px solid rgba(255,255,255,0.9);
        border-top: 1px solid rgba(255,255,255,0.9);
        border-bottom: 1px solid rgba(255,255,255,0.9);
        border-right: 0px solid rgba(255,255,255,0.9);
        max-height: 30px;
        display: table;
}
#locationfield {
        position: absolute;
        background-color: rgba(0,0,0,0.0);
        width: 100%;
        height: 100%;
}
#inlocationfield {
        font-family: Roboto, sans-serif;
	    font-size: 16px; 
        width: 100%;
        border: none;
        height: 100%;
        text-indent: 5px;
        background-color: transparent;
}
#menubutton {
        background-image: url(menu.svg);
        background-size: auto 80%;
        background-position: center center;
        background-repeat: no-repeat;
        position: absolute;
        height: 15%;
        width: 10%;
        z-index: 102;
        max-width: 30px;
        border: 1px solid rgba(255,255,255,0.9);     
        top: 8px;
        left: 2%;
        background-color: rgba(255,255,255,0.9);
        max-height: 30px;
}
#locationbutton {
        background-size: auto 80%;
        background-position: center center;
        background-repeat: no-repeat;
        position: absolute;
        height: 15%;
        width: 10%;
        z-index: 100;
        max-width: 30px;
        border: 1px solid rgba(255,255,255,0.9);     
        top: 47px;
        right: 2%;
        margin-right: 0px;
        background-color: rgba(255,255,255,0.9);
        max-height: 30px;
}
#calltaxiui {
        background-image: url(calltaxi.png);
        background-size: 360px;
        background-repeat: no-repeat;
        background-position: center bottom;
        width: 100%;
        height: 95px;
        position: absolute;
        bottom: 0px;
        z-index: 100;
        display: block;
}
#logoutbutton {
        font-family: Roboto, sans-serif;
	    font-size: 14px;
        border: 1px solid #FFFFFF;
        padding-top: 5px;
        padding-bottom: 5px;
        padding-left: 20px;
        padding-right: 20px;
        color: white;
        margin-left: 30%;
        text-transform: uppercase;
}
#overlay {
    background-image: url(directions.png);
    background-size: 100% 100%;
    opacity: 0.7;
	position: absolute;
	z-index: 10000000000000000;
	height: 100%;
	width: 100%;
	left: 0px;
	top: 0px;
}
#loadingindicator {
    filter: invert(100%);
    -webkit-filter: invert(100%);
	background-color: #E2E2E2;
	position: absolute;
	z-index: 10000000000000000;
	height: 100%;
	width: 100%;
	left: 0px;
	top: 0px;
	text-align: center;
}
#loadingindicator img {
	margin-top: 100px;
	width: 160px;
}
#divider {
    height: 1px;
    width: 100%;
    display: block;
    background-color: lightgrey;
}
#pages {
        width: 96%;
        height: 100%;
        overflow: scroll;
        top: 0;
        left: 0;
        position: absolute;
        z-index: 102;
        background-color: black;
        display: none;
        padding-left: 2%;
        padding-right: 2%;
        background-image: url(reg/kigali_blur.jpg);
        background-size: cover;
}
#pagestarget {

}
.menugpsblue {
        background-image: url(crosshairs-gps_blue.svg);
        background-size: 100% 100%; 
}
.menugps {
        background-image: url(crosshairs-gps.svg);
        background-size: 100% 100%;      
}
#locationfinderdialog {
        width: 100%;
        top: 0%;
        margin-left: 0%;
        margin-right: 0%;
        background-color: lightgray;
        height: 160px;
        display: none;
        position: absolute;
        z-index: 300;
        box-shadow: 2px 2px 6px 0.7px rgba(0,0,0,0.5);
}
#gosearchbyaddress {
        font-family: Roboto, sans-serif;
	    font-size: 14px;
        background-color: black;
        text-align: center;
        color: white;
        margin-left: 25%;
        width: 50%;
        padding-top: 10px;
        padding-bottom: 8px;
        text-transform: uppercase;
}
#searchbyaddress {
        border: 0px solid black;
        color: black;
        padding-top: 9px;
        padding-bottom: 9px;
        background-color: white;
        margin-left: 10%;
        text-indent: 5px;
        width: 80%;
        margin-bottom: 15px;
        margin-top: 30px;
}
.blur {
   -webkit-filter: blur(3px);
    pointer-events: none;
}
#loading_map_indicator {
    font-family: sans-serif;
    text-align: center;
    font-weight: 300;
    font-size: 110%;
    position: absolute;
    z-index: 200;
    width: 50%;
    padding-top: 5px;
    padding-bottom: 10px;
    margin-left: 25%;
    bottom: 35%;
    background-color: rgba(255,255,255,0.7);
    box-shadow: 2px 2px 6px 0.7px rgba(0,0,0,0.5);
}
</style>

</head>

<body>
    
<div style="display:none;" id="server_com"></div>
    
<div class="animated fadeIn" id="instantscreen">
    
<center>
<img id="instantscreen_logo" src="logo.png">
</center>
    
<div id="instantscreen_instructions"><svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#000000" d="M12,20A7,7 0 0,1 5,13A7,7 0 0,1 12,6A7,7 0 0,1 19,13A7,7 0 0,1 12,20M19.03,7.39L20.45,5.97C20,5.46 19.55,5 19.04,4.56L17.62,6C16.07,4.74 14.12,4 12,4A9,9 0 0,0 3,13A9,9 0 0,0 12,22C17,22 21,17.97 21,13C21,10.88 20.26,8.93 19.03,7.39M11,14H13V8H11M15,1H9V3H15V1Z" />
</svg> 250 Taxi has accepted your request, kindly wait for us to contact you with more instructions.</div>
    
<div id="time5min"></div>
    
<div id="instantscreen_customer_care">
    <div onclick="call_customer_care();" id="call_customer_care_button" class="waves-effect waves-light">
    <svg style="vertical-align: middle; width:24px;height:24px" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M4,3A1,1 0 0,0 3,4A17,17 0 0,0 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.17L13.21,17.37C10.38,15.93 8.06,13.62 6.62,10.78L8.82,8.57C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4M15,3V4.5H18.5L13,10L14,11L19.5,5.5V9H21V3H15Z" />
</svg>
    Call Customer Care
</div>
</div>

</div>
    
<div id="chat_overlay">
   
<div id="chat_overlay_close" onclick="close_chat();">
<svg style="width:24px;height:24px" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z" />
</svg>
</div>
    
<div id="chat_load_messages">

</div>
    
<input placeholder="Type a message" id="chat_message_input"></input>
<div class="waves-effect waves-light" id="chat_message_send_button"></div>
    
</div>    
    
    
    
    
    
    
    
    
    
    
<style>
#account_overlay {
    position: absolute;
    z-index: 100000000000;
    width: 100%;
    height: 100%;
    top: 0px;
    left: 0px;
    background-color: black;
    display: none;
    font-family: sans-serif;
    color: white;
}
.account_option {
    margin-left: auto;
    margin-right: auto;
    margin-top: 30px;
}
.account_option_info {
    margin-bottom: 10px;
    text-align: center;
}
.account_option .onoffswitch {
     margin-left: auto;
     margin-right: auto;
}
#account_overlay_x {

}
</style>   
    
<script>
function close_account_overlay() {
$( "#account_overlay" ).fadeOut( "slow", function() {
});
}
$(document).ready(function() {
var voice_enabled = localStorage.getItem("voice_enabled");
if (voice_enabled == "On") {
    $('#audio_choice_onoffswitch').prop('checked', true);   
}

        $( "#audio_choice" ).click(function() {
        var voice_enabled = document.getElementById('audio_choice_onoffswitch').checked;
    
        if (voice_enabled == false) {
            localStorage.setItem("voice_enabled","Off");
        }
        if (voice_enabled == true) {
            localStorage.setItem("voice_enabled","On");
        }
        });

});
</script>

<div id="account_overlay">
    
<div id="account_overlay_x" onclick="close_account_overlay();" style="padding:5px;">
<svg style="width:24px;height:24px; float:right; margin-top:5px; margin-right: 5px;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z" />
</svg>
</div>
    
<div class="account_option">
    
<div id="account_details_info" class="account_option_info">

<svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" />
</svg>
    
Account details</div>
    
<style>
    .simple_table {
        width: 90%;
        padding-left: 5%;
        padding-right: 5%;
    }
    .simple_table div {
        float:left;
        padding-top: 5px;
        padding-bottom: 5px;
        text-indent: 5px;
        margin-bottom: 2px;
        overflow: hidden;
        white-space: nowrap;
        background-color: #3C3F41;
    }
    .simple_table .simple_table_desc {
        width: 30%;
        color: darkgrey;
    }
    .simple_table .simple_table_content {
        width: 70%;
    }
    .account_button {
        border: solid 1px white;
        font-family: Roboto, sans-serif;
	    font-size: 14px;
        text-transform: uppercase;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 2%;
        padding-right: 2%;
        margin-left: 30%;
        width: 36%;
        max-width: 250px;
        text-align: center;
        white-space: nowrap;
        overflow: hidden;
        margin-top: 10px;
    }
    #account_button_after_click {
        padding: 5px;
        background-color: lightgrey;
        color: black;
        font-size: 90%;
        text-align: center;
        margin-top: 10px;
    }
</style>
    
<div id="account_simple_table" class="simple_table">
    
<div class="simple_table_desc">Name</div>
<div id="account_name" class="simple_table_content">Loading...</div>
    
<div class="simple_table_desc">Username</div>
<div id="account_username" class="simple_table_content">Loading...</div>
    
<div class="simple_table_desc">E-Mail</div>
<div id="account_email" class="simple_table_content">Loading...</div>

<div class="simple_table_desc">Phone</div>
<div id="account_phone" class="simple_table_content">Loading...</div>

<div class="simple_table_desc">PIN</div>
<div class="simple_table_content">****</div>

</div>
    
<script>
function change_account() {
alert('We have sent you instructions to your E-Mail on how to update your account. If you do not recieve it please contact customer care.');

document.getElementById("account_button").style.display = "none";
document.getElementById("account_button_after_click").style.display = "block";

}
</script>
    
<div id="account_button" onclick="change_account();" class="account_button waves-effect waves-light" on>Change</div>
    
<div style="clear:both;"></div>

<div id="account_button_after_click" class="animated fadeIn" style="display:none;">E-Mail sent. Please check your inbox!</div>

</div>

<div style="clear:both;"></div>
   
<div class="account_option">
    
<div class="account_option_info">

<svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M12,12A3,3 0 0,0 9,15A3,3 0 0,0 12,18A3,3 0 0,0 15,15A3,3 0 0,0 12,12M12,20A5,5 0 0,1 7,15A5,5 0 0,1 12,10A5,5 0 0,1 17,15A5,5 0 0,1 12,20M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8C10.89,8 10,7.1 10,6C10,4.89 10.89,4 12,4M17,2H7C5.89,2 5,2.89 5,4V20A2,2 0 0,0 7,22H17A2,2 0 0,0 19,20V4C19,2.89 18.1,2 17,2Z" />
</svg>
    
Voice Guidance</div>

<div id="audio_choice" class="onoffswitch">
    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="audio_choice_onoffswitch">
    <label class="onoffswitch-label" for="audio_choice_onoffswitch">
        <span class="onoffswitch-inner"></span>
        <span class="onoffswitch-switch"></span>
    </label>
</div>
    
</div>

    
</div>
    
    
    
    
    
    
    
    
    
    
    
<div id="loading_map_indicator" class="animated fadeInDown" style="-webkit-animation-delay: 1s;">

<div class="loader">
    
<br><br>
<svg class="circular" viewBox="25 25 50 50" style="vertical:align: middle;">
      <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
</svg>
</div>
    
Loading map...

</div>
    
<div id="driveroverlay">
    
<img id="driveroverlay_back_to_list" class="arrow_back_grey" src="reg/arrow_back_grey.svg" onclick="reloadPositionStart();driveroverlay_back_to_list_x();">

<div id="driveroverlay_show_details">
    
</div>
    
</div>
    
<script>
    function driveroverlay_back_to_list_x() {
        
    // When you want to cancel it:
        clearInterval(journey_updater);
        journey_updater = 0;
        
    document.getElementById("driverlist").style.display = "block";
    document.getElementById("menubutton").style.display = "block";
    document.getElementById("locationfieldholder").style.display = "block";
    document.getElementById("locationbutton").style.display = "block";
    document.getElementById("searchdrivers").style.display = "block";
    
    document.getElementById("driveroverlay").style.display = "none";
    document.getElementById("driveroverlay_journey_start").style.display = "none";
    }
</script>
    
<div onclick="pickdriver_request_start();" id="driveroverlay_journey_start" class="waves-effect waves-dark">
    <svg style="vertical-align: middle; width:24px;height:24px" viewBox="0 0 24 24">
    <path fill="#000000" d="M5,11L6.5,6.5H17.5L19,11M17.5,16A1.5,1.5 0 0,1 16,14.5A1.5,1.5 0 0,1 17.5,13A1.5,1.5 0 0,1 19,14.5A1.5,1.5 0 0,1 17.5,16M6.5,16A1.5,1.5 0 0,1 5,14.5A1.5,1.5 0 0,1 6.5,13A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 6.5,16M18.92,6C18.72,5.42 18.16,5 17.5,5H15V3H9V5H6.5C5.84,5 5.28,5.42 5.08,6L3,12V20A1,1 0 0,0 4,21H5A1,1 0 0,0 6,20V19H18V20A1,1 0 0,0 19,21H20A1,1 0 0,0 21,20V12L18.92,6Z" />
</svg>
    Pick me now
</div>

<div onclick="pickdriver_request_cancel();" id="driveroverlay_journey_cancel" class="waves-effect waves-light">
    <svg style="vertical-align: middle; width:24px;height:24px" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z" />
</svg>
    Cancel Request
</div>
    

<div id="journey_accepted_panel">
    
<div onclick="pickdriver_request_cancel();" id="driveroverlay_journey_cancel_small" class="waves-effect waves-light">
    <svg style="vertical-align: middle; width:24px;height:24px" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z" />
</svg>
</div>
    
<div onclick="chat();" id="chat_button" class="waves-effect waves-light">
    <svg style="vertical-align: middle; width:24px;height:24px" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M6,9H18V11H6M14,14H6V12H14M18,8H6V6H18" />
</svg>
    Chat
</div>
    
<div onclick="call();" id="call_button" class="waves-effect waves-light">
    <svg style="vertical-align: middle; width:24px;height:24px" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M4,3A1,1 0 0,0 3,4A17,17 0 0,0 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.17L13.21,17.37C10.38,15.93 8.06,13.62 6.62,10.78L8.82,8.57C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4M15,3V4.5H18.5L13,10L14,11L19.5,5.5V9H21V3H15Z" />
</svg>
    Call
</div>

</div>
    
    
<div id="driveroverlay_journey_cancel_dialog" class="animated zoomIn">

    <div class="canceldialogbuttontitle">Please state reason</div>
    
    <div onclick="localStorage.setItem('cancel_reason','driver_late');cancel_reason_close();" class="canceldialogbutton" id="driveroverlay_journey_cancel_dialog_late">Driver was late</div>

    <div onclick="localStorage.setItem('cancel_reason','cant_track');cancel_reason_close();" class="canceldialogbutton" id="driveroverlay_journey_cancel_dialog_notrack">Can't track driver</div>
    
    <div onclick="localStorage.setItem('cancel_reason','cant_reach');cancel_reason_close();" class="canceldialogbutton" id="driveroverlay_journey_cancel_dialog_nocom">Can't reach driver</div>
    
    <div onclick="localStorage.setItem('cancel_reason','other');cancel_reason_close();" class="canceldialogbutton" id="driveroverlay_journey_cancel_dialog_other">Other</div>
    
    <div style="padding: 5px; background-color: darkgrey;">
        
    <div onclick="$('#driveroverlay_journey_cancel_dialog').fadeOut('slow');" class="canceldialogbutton" style="color: black;" id="driveroverlay_journey_cancel_dialog_cancel">Cancel</div>
    </div>

</div>
    
<script>
    function cancel_reason_close() {
        
        showindicator();
        
        document.getElementById('driveroverlay_journey_cancel_dialog').style.display = 'none';
        document.getElementById('driveroverlay_journey_cancel_dialog').style.display = 'none';
        document.getElementById('driveroverlay_journey_cancel').style.display = 'none';
        
        var pickdriver_id = localStorage.getItem("pickdriver_id");
        var username = localStorage.getItem("username");
        
        var cancel_reason = localStorage.getItem("cancel_reason");
        
        if(cancel_reason == "other") {
            cancel_reason = prompt("Please let the driver know why you cancel", "");
        }
        
         $.get( "http://250taxi.com/db/partner/taxi_comlink_journey.php?task=cancel&username="+username+"&pickdriver_id="+pickdriver_id+"&cancel_reason="+cancel_reason+"",  function( data ) {
        location.reload();
    });
        
    }
</script>
    
<style>
    #driveroverlay_show_details {
        text-align: center;
        position: absolute;
        top: 13px;
        width: 100%;
    }
    #driveroverlay_back_to_list {
        position: absolute;
        z-index: 100000;
    }
    #driver_details_license_plate {
        background-color: white;
        padding-top: 3px;
        padding-bottom: 3px;
        padding-left: 8px;
        padding-right: 8px;
        border: 2px solid black;
        display: inline;
        border-radius: 4px;
    }
    #driver_details_type {
        padding-bottom: 13px;
    }
    #driver_details_distance {
        padding-bottom: 5px;
    }
    #driver_details_phone {
        margin-bottom: 5px;
    }
    #driver_details_phone_link {
        color: black;
        text-decoration: none;
    }
    #driver_details_name {
        margin-bottom: 5px;
    }
</style>
    
<div id="pages">
<div id="pagestarget">

</div>
</div>
    
<div id="overlay"></div>
    
<div id="loadingindicator">
<img src="282.gif" width="120">
</div>

<script>
    function logout() {
        
    showindicator();
        
var userid = localStorage.getItem('userid');     
localStorage.setItem("logupdate","User <span class='log_userid'>"+userid+"</span> logged out");logupdate();

    localStorage.removeItem('rememberuser');
    localStorage.removeItem('username');
        
    setTimeout(function(){
        document.location.href = 'index.html';    
    }, 3000);

    }
</script>
    
<nav class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left">
    
<br>
<span id="logoutbutton" onclick="logout();">Logout</span>
<br><br>
    
            <div id="mainmenu_account">Account</div>
			<div id="mainmenu_services">Services</div>
			<div id="mainmenu_promotions">Promotions</div>
            <div id="mainmenu_history">History</div>
            <span id="divider"></span>
			<div id="mainmenu_becomedriver">BECOME A 250 TAXI DRIVER</div>
			<div id="mainmenu_corporate">250 TAXI CORPORATE</div>
            <div id="mainmenu_about">ABOUT</div>
            <div id="mainmenu_help">HELP</div>
</nav>
    
<div id="menubutton" class="toggle-menu menu-left"> </div>
    
<script>
$(document).ready(function() {
    
var overlay_shown = localStorage.getItem("overlay_shown");

if(overlay_shown == "Yes") {
    document.getElementById("overlay").style.display = "none";
}
    
$( "#overlay" ).click(function() {
    localStorage.setItem("overlay_shown","Yes");
    $( "#overlay").fadeOut( "slow", function() {

    });
});
    
$( "#locationfield" ).click(function() {
    $( "#locationfinderdialog").slideDown( "slow", function() {
        $("#searchbyaddress").focus();
    });
});

$( "#locationfinderdialog_x" ).click(function() {
    $( "#locationfinderdialog").slideUp( "slow", function() {

    });
});

});

</script>
    
<div id="locationfinderdialog">
    
<div id="locationfinderdialog_x" style="padding:5px;">
<svg style="width:24px;height:24px; float:right; margin-top:5px; margin-right: 5px;" viewBox="0 0 24 24">
    <path fill="#000000" d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z" />
</svg>
</div>

<input style="display:none" id="lat" name="lat" val="40.713956">
<input style="display:none" id="long" name="long" val="74.006653">

<input placeholder="Address" id="searchbyaddress" value="">

<div class="waves-effect waves-light" id="gosearchbyaddress" onclick="codeAddress();">

<svg style="vertical-align: middle; width: 24px; height: 24px;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" />
</svg>
    
    Pickup Location
</div>

</div>
    
<script>
function codeAddress() {
    
var address = document.getElementById('searchbyaddress').value;
    
var addresslength = address.length;
    
if (addresslength > 2) {
    $( "#locationfinderdialog").slideUp( "slow", function() {});
    
}
else {
    alert("Please enter a search term!");
    return;
}
    
var city = ', Kigali';
var country = ', Rwanda';
var address = address + city + country;
    
document.getElementById('inlocationfield').value = address;
    
  geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      pos = results[0].geometry.location;
    
      pos2box = String(pos);
    
      pos2box = pos2box.split(',',2);
        
    // alert(pos2box[0]);
    // alert(pos2box[1]);
    
    // var latlng = {lat: parseFloat(latlngStr[0]), lng: parseFloat(latlngStr[1])};
        
    var search_lat = pos2box[0];        
    var search_lat = search_lat.slice( 1 );     
    var search_long = pos2box[1];  
    var search_long = search_long.slice( 1 );  
    var search_long = search_long.substring(0, search_long.length - 1);
        
        document.getElementById("lat").value = search_lat;
        document.getElementById("long").value = search_long;
        
    var options = {
				zoom: 16,
                disableDefaultUI: true,
                streetViewControl: false,
				center: pos,
				mapTypeId: google.maps.MapTypeId.ROADMAP,
                styles: [{ featureType: "poi", elementType: "labels", stylers: [{ visibility: "off" }]}]
			};
    
   var map = new google.maps.Map(document.getElementById("map"), options);
        
    // alert(pos);
        
    // Remove the current marker, if there is one
			if (typeof(marker) != "undefined") marker.setMap(null);
            
var iconimage = {
    url: "userpinicon.png", // url
    scaledSize: new google.maps.Size(90, 90), // scaled size
    origin: new google.maps.Point(0,0), // origin
    anchor: new google.maps.Point(43,90) // anchor
};
            
marker2 = new google.maps.Marker({
                draggable: true,
                icon: iconimage,
				position: pos,
				map: map,
				title: "User location"
			});
        
google.maps.event.addListener(marker2, 'dragend', function (event) {
            document.getElementById("lat").value = event.latLng.lat();
            document.getElementById("long").value = event.latLng.lng();
});
        

google.maps.event.addListener(marker2, 'dragend', function(evt){

pos = new google.maps.LatLng(evt.latLng.lat().toFixed(3),evt.latLng.lng().toFixed(3));
                
geocodeLatLng(geocoder, map);
    
});
        
        
        
    } 
    else {
      alert('Geocode was not successful for the following reason: ' + status);
    }
  });
}    
</script>

<div id="locationfieldholder">
<div id="locationfield"></div>
<input type="text" id="inlocationfield">
</div>
    
<script>
function audio_update_location() {
    
localStorage.setItem('toast','Locating you on map');toast();
    
var voice_enabled = localStorage.getItem("voice_enabled");
if (voice_enabled == "On") {responsiveVoice.speak("Locating... Please wait");}    
}
</script>
    
<div id="locationbutton" class="menugps" onclick="reloadPositionStart();audio_update_location();"> </div>    

    <div id="calltaxiui"></div>
    <div id="map"></div>

<script>
    
function showindicator() {
document.getElementById("loadingindicator").className = "animated fadeIn";
document.getElementById("loadingindicator").style.display = "block";
}
function hideindicator() {
document.getElementById("loadingindicator").className = "animated fadeOut";
setTimeout(function(){
document.getElementById("loadingindicator").style.display = "none";
}, 1000);
}


var marker;
var infoWindow;
    
function reloadPositionStart() {
     
    reloadPosition();
    document.getElementById("locationbutton").className = 'menugpsblue';
    setTimeout(function(){document.getElementById("locationbutton").className = 'menugps';}, 1000);
    setTimeout(function(){document.getElementById("locationbutton").className = 'menugpsblue';}, 2000);
    setTimeout(function(){document.getElementById("locationbutton").className = 'menugps';}, 3000);
    setTimeout(function(){document.getElementById("locationbutton").className = 'menugpsblue';}, 4000);
    setTimeout(function(){document.getElementById("locationbutton").className = 'menugps';}, 5000);
    setTimeout(function(){document.getElementById("locationbutton").className = 'menugpsblue';}, 6000);
    setTimeout(function(){document.getElementById("locationbutton").className = 'menugps';}, 7000);
    setTimeout(function(){document.getElementById("locationbutton").className = 'menugpsblue';}, 8000);
    setTimeout(function(){document.getElementById("locationbutton").className = 'menugps';}, 8000);
}
    
function reloadPosition() {
navigator.geolocation.getCurrentPosition(
				displayPosition, 
				displayError, {
                enableHighAccuracy: true,
                timeout: timeoutVal,
                maximumAge: 0
                }
			);
pos;
// alert('reloaded: '+pos+'');
}

if (navigator.geolocation) {
    
			var timeoutVal = 10 * 1000 * 1000;

			navigator.geolocation.getCurrentPosition(
				displayPosition, 
				displayError, {
                enableHighAccuracy: true,
                timeout: timeoutVal,
                maximumAge: 0
                }
			);
            
}
else {
alert("Geolocation is not supported");
}

function displayPosition(position) {	
            
            document.getElementById("lat").value = position.coords.latitude;
            document.getElementById("long").value = position.coords.longitude;     
            
            pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
            
            geocodeLatLng(geocoder, map);
            
			var options = {
				zoom: 16,
                disableDefaultUI: true,
                streetViewControl: false,
				center: pos,
				mapTypeId: google.maps.MapTypeId.ROADMAP,
                styles: [{ featureType: "poi", elementType: "labels", stylers: [{ visibility: "off" }]}]
			};
			var map = new google.maps.Map(document.getElementById("map"), options);
			// Remove the current marker, if there is one
			if (typeof(marker) != "undefined") marker.setMap(null);
            
var iconimage = {
    url: "userpinicon.png", // url
    scaledSize: new google.maps.Size(90, 90), // scaled size
    origin: new google.maps.Point(0,0), // origin
    anchor: new google.maps.Point(43,90) // anchor
};
    
document.getElementById("locationfield").style.display = "block";
document.getElementById("locationfieldholder").style.display = "block";
document.getElementById("inlocationfield").style.display = "block";
    
document.getElementById("loading_map_indicator").style.display = "none";
            
			marker = new google.maps.Marker({
                draggable: true,
                // icon: "userpinicon.png",
                icon: iconimage,
				position: pos,
				map: map,
				title: "User location"
			});
            
            google.maps.event.addListener(marker, 'dragend', function (event) {
            document.getElementById("lat").value = event.latLng.lat();
            document.getElementById("long").value = event.latLng.lng();
            geocodeLatLng(geocoder, map);
            });

            // get coordinates from marker?
            google.maps.event.addListener(marker, 'dragend', function(evt){
            // document.getElementById('current').innerHTML = '<p>Marker dropped: Current Lat: ' +         evt.latLng.lat().toFixed(3) + ' Current Lng: ' + evt.latLng.lng().toFixed(3) + '</p>';
                
            pos = new google.maps.LatLng(evt.latLng.lat().toFixed(3),evt.latLng.lng().toFixed(3));
                
            // alert('Marker dropped: Current Lat: '+evt.latLng.lat().toFixed(3)+' Current Lng: '+evt.latLng.lng().toFixed(3)+' Pos: '+pos+'');
            
            geocodeLatLng(geocoder, map);
                
            });
                
			var contentString = "<b>Timestamp:</b> " + parseTimestamp(position.timestamp) + "<br/><b>User location:</b> lat " + position.coords.latitude + ", long " + position.coords.longitude + ", accuracy " + position.coords.accuracy;
			// Remove the current infoWindow, if there is one
			
            if (typeof(infoWindow) != "undefined") infoWindow.setMap(null);
			infowindow = new google.maps.InfoWindow({
				content: contentString
			});
            
			// google.maps.event.addListener(marker, 'click', function() {
			//	infowindow.open(map,marker);
			// });
            
		}
		function displayError(error) {
			var errors = { 
				1: 'Permission denied\n\nPlease allow 250TAXI to locate you. You can change this in your browsers settings.',
				2: 'Position unavailable. 250TAXI was not able to find your current location.',
				3: 'Request timeout. It took too long to locate you. Please try again.'
			};
			alert("Error: " + errors[error.code]);
		}
		function parseTimestamp(timestamp) {
			var d = new Date(timestamp);
			var day = d.getDate();
			var month = d.getMonth() + 1;
			var year = d.getFullYear();
			var hour = d.getHours();
			var mins = d.getMinutes();
			var secs = d.getSeconds();
			var msec = d.getMilliseconds();
			return day + "." + month + "." + year + " " + hour + ":" + mins + ":" + secs + "," + msec;
		}
    
var geocoder = new google.maps.Geocoder;
    
function geocodeLatLng(geocoder, map) {
    
  // var input = String(pos);
    
  // var latlngStr = input.split(',', 2);
    
  // var latlng = {lat: parseFloat(latlngStr[0]), lng: parseFloat(latlngStr[1])};
    
  geocoder.geocode({'location': pos}, function(results, status) {
    if (status === google.maps.GeocoderStatus.OK) {
      if (results[1]) {
        // infowindow.setContent(results[1].formatted_address);
        // infowindow.open(map, marker);
        document.getElementById('inlocationfield').value = results[0].formatted_address;
      } 
    else {
        // window.alert('No results found');
      }
    } 
    else {
      // window.alert('Geocoder failed due to: ' + status);
    }
  });
}
    
function gofullscreen() {
var elem = document.getElementById('pages');
elem.webkitRequestFullScreen();
}

jQuery(document).ready(function($) {
    
localStorage.setItem('activity','searching_address');
    
 $('#searchbyaddress').blur(function() {
        document.getElementById("calltaxiui").style.display = "block";
      })
      .focus(function() {
        document.getElementById("calltaxiui").style.display = "none";
      });

$('.toggle-menu').jPushMenu();
    
document.getElementById("loadingindicator").className = "animated fadeOut";
setTimeout(function(){
document.getElementById("loadingindicator").style.display = "none";
}, 2000);
    
});
    
$(document).ready( function() {
function hi(){
    
    
// Update chat window

chat_enabled = localStorage.getItem("chat_enabled");

// Check if chat has been started

if (chat_enabled == "Yes") {
driverid = localStorage.getItem("pickdriver_id");
clientid = localStorage.getItem("userid");   

$( "#chat_load_messages" ).load( "http://250taxi.com/db/journey/chat.php?task=show_messages&driverid="+driverid+"&clientid="+clientid+"", function( data ) {
    
    // Check if there is a new chat message
    // var chat_new_from_client = document.getElementById("chat_new_from_client").innerHTML;
    var chat_new_from_driver = document.getElementById("chat_new_from_driver").innerHTML;
    // console.log(chat_new_from_client);
    
    if (chat_new_from_client == "1") {
        // console.log("New chat message from client");
    }
    if (chat_new_from_driver == "1") {
        console.log("New chat message from driver");
        
        
        // var chataudio = new Audio('sound/bubbley.mp3');chataudio.play();
        
        
    }
    
});
}
    
// Report location
    
        var status_lat= document.getElementById('lat').value;
        var status_long = document.getElementById('long').value;
        var status_username = localStorage.getItem('username');
        var status_userid = localStorage.getItem('userid');
        var status_activity = localStorage.getItem('activity');
    
$.get( "http://250taxi.com/db/status_user.php?status_lat="+status_lat+"&status_long="+status_long+"&status_username="+status_username+"&status_userid="+status_userid+"&status_activity="+status_activity+"", function( data ) {
    
    console.log("Status: " + data);
    
    document.getElementById("server_com").innerHTML = data;
    
    // check activity and show messages to client
    
    var activity = localStorage.getItem("activity");
    var server_check_if_declined = document.getElementById("server_check_if_declined").innerHTML;
    var server_journey_status = document.getElementById("server_journey_status").innerHTML;
 
    // Prevent multiple logins
    mlicheck();
    
    if (activity == "driver_selected" || activity == "driver_has_arrived") {
        
        if (server_check_if_declined == "declined") {
            declined();
        }
        if (server_journey_status == "accepted") {
            console.log("accepted!");
            localStorage.setItem('activity','driver_has_accepted');
            localStorage.setItem('toast','Driver accepted and is on his way to you!');toast();
            accepted();
        }
        
    }
});       
}
setInterval(hi, 15000);
    
// Repeat Server ping
    
hi();
});
    
function declined () {
    
var pickdriver_id = localStorage.getItem("pickdriver_id");
var username = localStorage.getItem("username");
    
localStorage.setItem('toast','Sorry, the driver declined your request. Please choose a different driver.');toast();

    $.get( "http://250taxi.com/db/partner/taxi_comlink_journey.php?task=declined&username="+username+"",  function( data ) {
        setTimeout(function(){
        showindicator();
        }, 5000);
        setTimeout(function(){
        alert("Sorry, the driver declined your request. Please choose a different driver.");
        location.reload();
        }, 6000);
    });

}
function accepted() {
    
// Start updating chat
localStorage.setItem("chat_enabled","Yes");
    
driverid = localStorage.getItem("pickdriver_id");
clientid = localStorage.getItem("userid");
    
localStorage.setItem("logupdate","Driver <span class='log_driverid'>"+driverid+"</span> acccepted request of user <span class='log_userid'>"+clientid+"</span>");logupdate();

$( "#chat_load_messages" ).load( "http://250taxi.com/db/journey/chat.php? task=show_messages&driverid="+driverid+"&clientid="+clientid+"", function() {
    document.getElementById("chat_load_messages").className = "animated fadeIn";
    document.getElementById("chat_load_messages").style.display = "block";
});
    
// Show overlay with buttons
    
    document.getElementById("driveroverlay_journey_cancel").style.display = "none";
    document.getElementById("journey_accepted_panel").style.display = "block";
    document.getElementById("journey_accepted_panel").className = "animated fadeIn";
}

</script>


<div id="journey_status_dialog">
    
<div class="sdbox" id="journey_status_dialog_window">

<div id="journey_status_dialog_title" class="sdtitle"></div>
    
<p id="journey_status_dialog_content"></p>

</div>

</div>
    
    
<div id="mydetailedlocation">
<div class="sdbox">

<div class="sdtitle">Tell us more info about where you are</div>
    
<input class="sdinput" placeholder="I am at..." id="taxirequest_detailedlocation"></input>

<div class="waves-effect waves-light sdbutton" onclick="setTimeout(function(){ detailedlocation_complete(); }, 1000);">
    
    <svg style="width:24px; height:24px; vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z" />
</svg>
    
    OK</div>
    
<div class="waves-effect waves-light sdbutton sdbutton_gray" onclick="setTimeout(function(){ detailedlocation_complete_skip(); }, 1000);">Skip</div>

</div>
</div>
    
    
    
    
    
    
    
<div id="searchdrivers">    
    
<div id="mydestination" class="sdbox">
    
<div class="searchdrivers_x">                    
    <div onclick="searchdrivers_x();">
        <svg viewBox="0 0 24 24">
    <path fill="grey" d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z" />
        </svg>
    </div>
</div>
    
    
        <div class="sdtitle">My Destination</div>
        
        <input class="sdinput" placeholder="Let's go to..." id="taxirequest_destination"></input>
        
        <div class="waves-effect waves-light sdbutton" onclick="getdrivers();">
            
<svg style="width:24px;height:24px; vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M5,11L6.5,6.5H17.5L19,11M17.5,16A1.5,1.5 0 0,1 16,14.5A1.5,1.5 0 0,1 17.5,13A1.5,1.5 0 0,1 19,14.5A1.5,1.5 0 0,1 17.5,16M6.5,16A1.5,1.5 0 0,1 5,14.5A1.5,1.5 0 0,1 6.5,13A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 6.5,16M18.92,6C18.72,5.42 18.16,5 17.5,5H15V3H9V5H6.5C5.84,5 5.28,5.42 5.08,6L3,12V20A1,1 0 0,0 4,21H5A1,1 0 0,0 6,20V19H18V20A1,1 0 0,0 19,21H20A1,1 0 0,0 21,20V12L18.92,6Z" />
</svg>
            
        Go
        </div>
    
    <div class="waves-effect waves-light sdbutton sdbutton_gray" onclick="getdriversskipdestination();">Skip</div>
        
</div>
    
<div id="citynavigator_start" class="sdbox">
    <div class="sdtitle">City Navigator</div>
    
<div class="waves-effect waves-light sdbutton" onclick="citynavigator();">
        
<svg style="width:24px;height:24px; vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M6,21V8A2,2 0 0,1 8,6L16,3V6A2,2 0 0,1 18,8V21H12V16H8V21H6M14,19H16V16H14V19M8,13H10V9H8V13M12,13H16V9H12V13Z" />
</svg> Pick a place
        </div>
    
</div>
    
    
    
    
    
    
    
    
<div id="driverlist" style="display:none;" class="sdbox">
    
<div class="searchdrivers_x">                    
    <div onclick="searchdrivers_x();">
        <svg viewBox="0 0 24 24">
    <path fill="grey" d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z" />
        </svg>
    </div>
</div>
    
    <div class="sdtitle">Please select driver</div>
    
    <div id="driverlist_scanner">
        
        <div class="loader">
<svg class="circular" viewBox="25 25 50 50" style="vertical:align: middle;">
      <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
</svg>
</div>
        
    </div>
</div>
    
    
    
    
    

    

    
    
    
    
<div id="citynavigator" style="display:none;" class="sdbox">
    
<div class="searchdrivers_x">                    
    <div onclick="searchdrivers_x();">
        <svg viewBox="0 0 24 24">
    <path fill="grey" d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z" />
        </svg>
    </div>
</div>

    <div class="sdtitle">City Navigator</div>
    
<select id="citynavigator_category">
    <option>Shopping</option>
    <option>Hotels</option>
    <option>Restaurants</option>
    <option>Police</option>
    <option>Banks</option>
    <option>Forex</option>
    <option>Insurance</option>
    <option>Petrol</option>
    <option>Schools</option>
    <option>Hospitals</option>
    <option>Pharmacies</option>
    <option>Sights</option>
    <option>Government</option>
    <option>Clubs</option>
</select>
    
    <div id="citynavigatorlist">    
        
        <div class="loader">
            
            <br><br>
            
<svg class="circular" viewBox="25 25 50 50" style="vertical:align: middle;">
      <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
</svg>
</div>
        
    </div>
</div>
    
    
    


  
    
    

    



    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    
    
    
    
    
    



</body>
</html>